# Disable encryption of cookies, passwords, settings... on Mac.

--- a/components/os_crypt/os_crypt_mac.mm
+++ b/components/os_crypt/os_crypt_mac.mm
@@ -174,6 +174,11 @@ bool IsEncryptionAvailable() {
 
 bool OSCryptImpl::EncryptString(const std::string& plaintext,
                             std::string* ciphertext) {
+  if (base::CommandLine::ForCurrentProcess()->HasSwitch("disable-encryption")) {
+      *ciphertext = plaintext;
+      return true;
+  }
+
   if (plaintext.empty()) {
     *ciphertext = std::string();
     return true;
@@ -198,6 +203,11 @@ bool IsEncryptionAvailable() {
 
 bool OSCryptImpl::DecryptString(const std::string& ciphertext,
                             std::string* plaintext) {
+  if (base::CommandLine::ForCurrentProcess()->HasSwitch("disable-encryption")) {
+      *ciphertext = plaintext;
+      return true;
+  }
+
   if (ciphertext.empty()) {
     *plaintext = std::string();
     return true;
